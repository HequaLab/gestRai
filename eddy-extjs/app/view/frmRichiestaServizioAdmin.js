/*
 * File: app/view/frmRichiestaServizioAdmin.js
 *
 * This file was generated by Sencha Architect version 3.2.0.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 5.1.x library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 5.1.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('Rai.view.frmRichiestaServizioAdmin', {
    extend: 'Ext.panel.Panel',
    alias: 'widget.frmRichiestaAdmin',

    requires: [
        'Rai.view.frmRichiestaNuovoServizioViewModel2',
        'Rai.view.frmRichiestaNuovoServizioAdmin',
        'Ext.button.Button',
        'Ext.grid.Panel',
        'Ext.grid.filters.filter.String',
        'Ext.grid.column.Number',
        'Ext.grid.column.Date',
        'Ext.grid.filters.filter.Date',
        'Ext.grid.column.Action',
        'Ext.view.Table',
        'Ext.toolbar.Paging',
        'Ext.grid.filters.Filters',
        'Ext.form.field.Date',
        'Ext.form.field.Time',
        'Ext.form.field.TextArea',
        'Ext.panel.Tool'
    ],

    controller: 'frmRichiestaNuovoServizioAdmin',
    viewModel: {
        type: 'frmrichiestaservizioadmin'
    },
    height: 753,
    id: 'frmRichiestaServizioAdmin',
    padding: 0,
    width: 1278,
    title: 'Area servizi',
    titleAlign: 'center',
    defaultListenerScope: true,

    layout: {
        type: 'border',
        padding: 2
    },
    dockedItems: [
        {
            xtype: 'toolbar',
            dock: 'top',
            items: [
                {
                    xtype: 'button',
                    hidden: true,
                    id: 'popButton1',
                    text: 'Richiesta nuova tipologia servizio',
                    listeners: {
                        click: {
                            fn: 'onShowWin',
                            scope: 'controller'
                        }
                    }
                }
            ]
        }
    ],
    items: [
        {
            xtype: 'panel',
            region: 'center',
            padding: 0,
            layout: 'fit',
            bodyBorder: true,
            bodyPadding: 2,
            title: '',
            items: [
                {
                    xtype: 'gridpanel',
                    id: 'elencoServiziAdmin',
                    padding: 5,
                    bodyBorder: true,
                    title: 'Elenco servizi',
                    store: 'storeRichiesteServizi',
                    columns: [
                        {
                            xtype: 'gridcolumn',
                            dataIndex: 'operatore',
                            text: 'Operatore',
                            flex: 1,
                            filter: {
                                type: 'string'
                            }
                        },
                        {
                            xtype: 'gridcolumn',
                            dataIndex: 'utenteApprovante',
                            text: 'Utente approvante',
                            flex: 1,
                            filter: {
                                type: 'string'
                            }
                        },
                        {
                            xtype: 'gridcolumn',
                            dataIndex: 'nome',
                            text: 'Servizio',
                            flex: 1,
                            filter: {
                                type: 'string'
                            }
                        },
                        {
                            xtype: 'gridcolumn',
                            dataIndex: 'lotto',
                            text: 'Lotto',
                            flex: 1,
                            filter: {
                                type: 'string'
                            }
                        },
                        {
                            xtype: 'gridcolumn',
                            dataIndex: 'tipologia',
                            text: 'Tipologia',
                            flex: 1,
                            filter: {
                                type: 'string'
                            }
                        },
                        {
                            xtype: 'gridcolumn',
                            dataIndex: 'operatore',
                            text: 'Operatore',
                            flex: 1,
                            filter: {
                                type: 'string'
                            }
                        },
                        {
                            xtype: 'gridcolumn',
                            dataIndex: 'produzione',
                            text: 'Produzione',
                            flex: 1,
                            filter: {
                                type: 'string'
                            }
                        },
                        {
                            xtype: 'gridcolumn',
                            dataIndex: 'matricola',
                            text: 'Matricola',
                            flex: 0.6,
                            filter: {
                                type: 'string'
                            }
                        },
                        {
                            xtype: 'gridcolumn',
                            dataIndex: 'uorg',
                            text: 'Uorg',
                            flex: 0.6,
                            filter: {
                                type: 'string'
                            }
                        },
                        {
                            xtype: 'gridcolumn',
                            dataIndex: 'luogo',
                            text: 'Luogo',
                            flex: 1,
                            filter: {
                                type: 'string'
                            }
                        },
                        {
                            xtype: 'numbercolumn',
                            dataIndex: 'ore',
                            text: 'Ore',
                            flex: 0.4,
                            filter: {
                                type: 'string'
                            }
                        },
                        {
                            xtype: 'datecolumn',
                            dataIndex: 'data',
                            text: 'Data',
                            flex: 1,
                            format: 'd-m-Y',
                            filter: {
                                type: 'date'
                            }
                        },
                        {
                            xtype: 'datecolumn',
                            dataIndex: 'dataFine',
                            text: 'Data fine',
                            flex: 1,
                            format: 'd-m-Y',
                            filter: {
                                type: 'date'
                            }
                        },
                        {
                            xtype: 'gridcolumn',
                            dataIndex: 'ora',
                            text: 'Ora',
                            flex: 0.5,
                            filter: {
                                type: 'string'
                            }
                        },
                        {
                            xtype: 'gridcolumn',
                            dataIndex: 'stato',
                            text: 'Stato',
                            flex: 0.7,
                            filter: {
                                type: 'string'
                            }
                        },
                        {
                            xtype: 'actioncolumn',
                            id: 'approvaSubmit1',
                            align: 'center',
                            dataIndex: 'stato',
                            text: 'Azioni',
                            flex: 0.8,
                            items: [
                                {
                                    handler: function(view, rowIndex, colIndex, item, e, record, row) {
                                        var s = record.get('stato');
                                        if ( s === 'Nessuno' || s === 'Non approvato'){
                                            Ext.Msg.show({
                                                title:'Operazione non permessa',
                                                msg: "La richiesta non è stata approvata, non è presente nessuno report",
                                                buttons: Ext.Msg.Ok,
                                            });
                                            return;
                                        }

                                        var stato = 'approvato';
                                        if (record.get('stato') == 'Erogato')stato = 'erogato';
                                        var nomeReport = 'report_' + record.get('richiestaNuovoServizioId') + "_" + stato + '.pdf';


                                        var win = Ext.create('Ext.window.Window', {
                                            height: 634,
                                            width: 780,
                                            layout: 'border',
                                            title: 'Report servizio',
                                            titleAlign: 'center',
                                            maximizable: true,
                                            closeAction: 'hide',
                                            items: [{
                                                xtype: 'component',
                                                html : '<iframe src="../files/'+ nomeReport + '" width="100%" height="100%"></iframe>',
                                            }]
                                        });
                                        win.show();
                                    },
                                    icon: 'data:image/png;base64,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',
                                    tooltip: 'Visualizza report PDF'
                                },
                                {
                                    handler: function(view, rowIndex, colIndex, item, e, record, row) {
                                        if (record.get('stato') === "Non approvato"){
                                            Ext.Msg.show({
                                                title:'Operazione non permessa',
                                                msg: "La richiesta non è stata approvata: non può essere erogata.",
                                                buttons: Ext.Msg.Ok,
                                            });
                                            return;
                                        }
                                        else if (record.get('stato') === "Cancellato"){
                                            Ext.Msg.show({
                                                title:'Operazione non permessa',
                                                msg: "La richiesta è stata cancellata: non può essere erogata.",
                                                buttons: Ext.Msg.Ok,
                                            });
                                            return;
                                        }
                                        else if (record.get('stato') === "In lavorazione"){
                                            Ext.Msg.show({
                                                title:'Operazione non permessa',
                                                msg: "La richiesta è in lavorazione, non sono permesse modifiche",
                                                buttons: Ext.Msg.Ok,
                                            });
                                            return;
                                        }
                                        else if (record.get('stato') === "Erogato"){
                                            Ext.Msg.show({
                                                title:'Operazione non permessa',
                                                msg: "Il servizio è stato erogato, non sono permesse modifiche",
                                                buttons: Ext.Msg.Ok,
                                            });
                                            return;
                                        }


                                        Ext.MessageBox.wait('Approvazione della richiesta in corso..');
                                        Ext.Ajax.request({
                                            url: '/richiestaNuovoServizio/inLavorazione/' + record.get('richiestaNuovoServizioId'),
                                            headers: {
                                                'Authorization': 'Bearer ' + ACCESS_TOKEN,
                                            },
                                            method:'POST',
                                            success: function (response, options) {
                                                Ext.StoreManager.lookup('storeRichiesteServizi').load();
                                                Ext.MessageBox.updateProgress(1);
                                                Ext.MessageBox.hide();
                                                Ext.Msg.show({
                                                    title:'Richiesta modificata',
                                                    msg: "Richiesta messa in lavorazione.",
                                                    buttons: Ext.Msg.Ok,
                                                });},
                                                failure: function (response, options) {
                                                    Ext.MessageBox.updateProgress(1);
                                                    Ext.MessageBox.hide();
                                                    Ext.Msg.show({
                                                        title:'Errore con il server',
                                                        msg: "C'è stato un errore durante l'operazione. Errore: " + response.status,
                                                        buttons: Ext.Msg.Ok,
                                                    });
                                                }


                                            });

                                    },
                                    icon: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADJUlEQVRYR+1XQVITURB9PZgqWREXWmElnIDMCSA7d8ABLOPCNbC0BopQGlkS1i6IR7A8gOEEE05gXGUsF8QVSGCe1TPzk5/JBCZqdEOqKKqSnv9fv379ukcwg0+x5hcfFuRIiA0IiiRaIA+CPbeVvk5mcD9Kdb8lkNWRs4ke5+gGr92O/X0mgMd1v6xB3z23/TsAF+ttZj1H8GXguc1bAZTe+k0ReaFBIWRbgCIYLge7bjUPGKV/viDnEwAcBJ5bmwig9MZfgwP9a+IGNQVC8PSyj41eze3lAaAxpbrfE8hCOp4hK2kdzEoDNYHsj2qAZ91dNyrtGANZtGnmgeeu5c06HadsEnwmjlwyxM9ve+5h1lkRAxosjny2A/4EQFxKORGiCPAUkFWKNAJv5SCTgWwA6AReeXlaBhbrfgOQLYI/hKhRFATWkrZsX/RZsfU0kQG9uOuVp9KI3UEkP0DQCgU9hygLnQVK6ILCYLdcMYn9NQAm8wFj5MeLa1RNtqbDVJy2H8QA6n5VICdpuvMyoMb1AOLr8wn1armt7q7bMGcmALQ7VolheQ2A8bZJleDJO3/j6gotu34KXJ2tVPcHzxNoqnkx5LHd81FMNBtkJQKaeMKtAGzjSC5Zp8NN4+dquXqhKj2LQZA7yoLJHkTHuCzA467nqtNGJchkIAPAPojetbCic2Lo+TyOqZatlPnEAOp+DUQVgqb+F5Gnps2nBxAXukfhzkjWlMb5xU3j0bxsQuQIQBvkVwraQpQhsk7wAMSSYUE1FgOwBtCIGVnePYml0YzR61/fPC8U5j6Z7yNNmL1AAShPiU3T4bJhYHx+xydokeMhJFgSYOkuYwpv+MqZk/dZcREDOuhCRGP+sh+dGWlgEoC77hv7XXWTtvUBGwmjOntMN/0XADbqmQNQtZv1bOI+MGmBmJr/xGDsEuQCMLLDkWckthPhac9G61neT1oDUwOw94BcrZdCdg9gagbsURq77HAX/CclKB36Swhh7/wd8/IwWNPzKlDjHDQllC9DK87RhtOcnyfW7qpcXZDn0Gli7gFYq7mOX30b1t2wnfWi8wvFRFU8abj8MgAAAABJRU5ErkJggg==',
                                    tooltip: 'Imposta la richiesta in lavorazione'
                                },
                                {
                                    handler: function(view, rowIndex, colIndex, item, e, record, row) {
                                        if (record.get('stato') === "Non approvato"){
                                            Ext.Msg.show({
                                                title:'Operazione non permessa',
                                                msg: "La richiesta non è stata approvata: non può essere erogata.",
                                                buttons: Ext.Msg.Ok,
                                            });
                                            return;
                                        }
                                        else if (record.get('stato') === "Cancellato"){
                                            Ext.Msg.show({
                                                title:'Operazione non permessa',
                                                msg: "La richiesta è stata cancellata: non può essere erogata.",
                                                buttons: Ext.Msg.Ok,
                                            });
                                            return;
                                        }
                                        else if (record.get('stato') === "Erogato"){
                                            Ext.Msg.show({
                                                title:'Operazione non permessa',
                                                msg: "Il servizio è stato erogato, non sono permesse modifiche",
                                                buttons: Ext.Msg.Ok,
                                            });
                                            return;
                                        }

                                        var uploadWidg = Ext.widget('uploadWin');
                                        uploadWidg.recordRicevuto = record;
                                        uploadWidg.show();
                                    },
                                    icon: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACeElEQVRYR91XQW7TQBR9z0kFrMgGlOxyg3hO0HCChhO0nIBkCQ4iEgksSU9AcoKUExBOYPcGsLIpG7OiUht/NE4muKmNJnKiqszKsv7Mf/P+/2/+JwA0hv4ZyCP9vY8lkBeRpyZ5Z7P+zm/T4Zd9OM6eGXou7wcAEZmC+LYDRtoED8051gxIIs+iN2peFkB95A8Ivr2/AOof/CYTfgTQsWJDEAOchP1WT9uXZqAx8scAX1o5zxiZEJYHMPS7YMrAVusaon56KigNYCVQXSFqtggSIrh4rc52EgJbp0V2pRmoDfzagwPnmCJWSUgiXlCmO2Ogcdc5cOdVoEPwqIrJNklIIAg91f0/klDf4snIdytwrPoEAWI6yefolUofstJVUB/5JwQ/bVWOglgqojSI0gD2mYQ6vx5WnaOo35re6oiMli/px5zgY2sWRM5/X6MdD1ScZUAgvyJPpYqqz60umXW1r0IA1k4LDA0AEfm+IDrp+6DbP3IGoiaQr5Gn2vsFIOgYRrLCphm5vEJTM1UKwCpPDiWR3mYXpanWt04rYuhPSB4bshaU50aydwEg7RkEmFxeSU/fyjhKxewg7bjdv5GSUyNW+l8pACu1nINspQ4EcUIOfnit02USc0aguXYuch72VQZMSQCZrPY3cjGAoKmTzfzXcYcD1wiV+Z83mASS9ncWizLVE8+m6OTtLJqOyk1GN5VPa8Z6DsiC0LNG1FcnecC4EoZNCi2uvzYJQs9VuotGguCWcGXEKRfA6uHQ6HIR2iBJiLEuq6fv/U5FOMvGfQG0TTkWArBxYmtzo+ZFemFfjf+1N3ditXWWZ2dKU4CgKO7ZfX8A9MAi6cIss+8AAAAASUVORK5CYII=',
                                    tooltip: 'Imposta la richiesta come erogata'
                                }
                            ]
                        }
                    ],
                    dockedItems: [
                        {
                            xtype: 'pagingtoolbar',
                            dock: 'bottom',
                            width: 360,
                            displayInfo: true,
                            store: 'storeRichiesteServizi'
                        },
                        {
                            xtype: 'toolbar',
                            dock: 'top',
                            items: [
                                {
                                    xtype: 'button',
                                    handler: function(button, e) {
                                        if ( Ext.getCmp('elencoServiziAdmin').getSelectionModel().getSelection() === undefined || Ext.getCmp('elencoServiziAdmin').getSelectionModel().getSelection() === null )return;
                                        var record = Ext.getCmp('elencoServiziAdmin').getSelectionModel().getSelection()[0];
                                        Ext.getCmp('lottoAdmin').setValue(record.get('lotto'));
                                        Ext.getCmp('comboTipologiaAdmin').setValue(record.get('tipologia'));
                                        Ext.getCmp('servizioComboAdmin').setValue(record.get('idServizio'));
                                        Ext.getCmp('codiciComboAdmin').setValue(record.get('idServizio'));
                                        Ext.getCmp('produzioneAdmin').setValue(record.get('idProduzione'));
                                        Ext.getCmp('matricolaAdmin').setValue(record.get('idProduzione'));
                                        Ext.getCmp('uorgAdmin').setValue(record.get('uorg'));
                                        Ext.getCmp('luogoAdmin').setValue(record.get('luogoId'));
                                    },
                                    icon: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAqElEQVQ4T+2TwRHCIBREd9OAJWgBcjZHSzEFGK0lFqB24pGzNEA6SAWuE0cdQMcBvcqN+f8/dmEhklXv3BIX7UHO0lq0lzwqNnwBdM4DmH4cfhQl/w6grOF70++A0LNtDevOlSmoA8/fAp4n/gHAeAeL7jwQnGRmoU+eTQ1ID+GQkcYexCoCSBqIams382OmAhQHZ7QZwos929ZEv5S3KBd4tmtzChVcASYkZKSJGNhEAAAAAElFTkSuQmCC',
                                    text: 'Duplica richiesta'
                                }
                            ]
                        }
                    ],
                    plugins: [
                        {
                            ptype: 'gridfilters'
                        }
                    ]
                }
            ],
            dockedItems: [
                {
                    xtype: 'panel',
                    dock: 'top',
                    height: 160,
                    hidden: true,
                    padding: 1,
                    bodyPadding: 10,
                    collapsible: true,
                    title: 'Filtri',
                    items: [
                        {
                            xtype: 'datefield',
                            fieldLabel: 'Label'
                        },
                        {
                            xtype: 'combobox',
                            fieldLabel: 'Servizio'
                        },
                        {
                            xtype: 'combobox',
                            fieldLabel: 'Stato'
                        }
                    ]
                }
            ]
        },
        {
            xtype: 'panel',
            region: 'west',
            padding: 1,
            width: 310,
            bodyPadding: 10,
            collapsible: true,
            title: 'Richiesta nuovo servizio',
            items: [
                {
                    xtype: 'combobox',
                    id: 'divisioneAdmin',
                    fieldLabel: 'Divisione',
                    displayField: 'nome',
                    forceSelection: true,
                    store: 'storeFiliali',
                    valueField: 'nome',
                    listeners: {
                        change: {
                            fn: 'changeDivisione',
                            scope: 'controller'
                        }
                    }
                },
                {
                    xtype: 'combobox',
                    id: 'managerAdmin',
                    fieldLabel: 'Manager',
                    displayField: 'nameComplete',
                    forceSelection: true,
                    queryMode: 'local',
                    store: 'storeUtenti',
                    valueField: 'userId',
                    listeners: {
                        change: {
                            fn: 'changeManager',
                            scope: 'controller'
                        }
                    }
                },
                {
                    xtype: 'combobox',
                    id: 'operatoreAdmin',
                    fieldLabel: 'Operatore',
                    displayField: 'nameComplete',
                    forceSelection: true,
                    store: 'storeUtenti',
                    valueField: 'userId',
                    listeners: {
                        change: {
                            fn: 'changeOperatore',
                            scope: 'controller'
                        }
                    }
                },
                {
                    xtype: 'combobox',
                    id: 'lottoAdmin',
                    fieldLabel: 'Lotto',
                    displayField: 'descrizione',
                    forceSelection: true,
                    queryMode: 'local',
                    store: [
                        'Lotto 1',
                        'Lotto 2',
                        'Lotto 3',
                        'Lotto 5'
                    ],
                    valueField: 'descrizione',
                    listeners: {
                        change: {
                            fn: 'onLottoChange',
                            scope: 'controller'
                        }
                    }
                },
                {
                    xtype: 'combobox',
                    id: 'comboTipologiaAdmin',
                    fieldLabel: 'Tipologia',
                    value: '',
                    autoSelect: false,
                    displayField: 'descrizione',
                    forceSelection: true,
                    queryMode: 'local',
                    store: [
                        'Canone',
                        'Modulo',
                        'Richiesta',
                        'Trasporto'
                    ],
                    valueField: 'descrizione',
                    listeners: {
                        change: {
                            fn: 'onServizioCombo1Select',
                            scope: 'controller'
                        }
                    }
                },
                {
                    xtype: 'combobox',
                    id: 'produzioneAdmin',
                    fieldLabel: 'Produzione',
                    displayField: 'descrizione',
                    enableRegEx: true,
                    forceSelection: true,
                    store: 'storeProduzioni',
                    valueField: 'produzioniId',
                    listeners: {
                        select: {
                            fn: 'onMatricolaSelect',
                            scope: 'controller'
                        }
                    }
                },
                {
                    xtype: 'combobox',
                    id: 'matricolaAdmin',
                    fieldLabel: 'Matricola',
                    displayField: 'matricola',
                    enableRegEx: true,
                    forceSelection: true,
                    store: 'storeProduzioni',
                    valueField: 'produzioniId',
                    listeners: {
                        select: {
                            fn: 'onMatricolaSelect1',
                            scope: 'controller'
                        }
                    }
                },
                {
                    xtype: 'combobox',
                    id: 'servizioComboAdmin',
                    fieldLabel: 'Servizio',
                    displayField: 'descrizione',
                    enableRegEx: true,
                    forceSelection: true,
                    queryMode: 'local',
                    store: 'storeServizi',
                    valueField: 'serviziId',
                    listeners: {
                        select: {
                            fn: 'onServizioComboSelect',
                            scope: 'controller'
                        }
                    }
                },
                {
                    xtype: 'combobox',
                    id: 'codiciComboAdmin',
                    fieldLabel: 'Voce',
                    displayField: 'codice',
                    enableRegEx: true,
                    forceSelection: true,
                    queryMode: 'local',
                    store: 'storeServizi',
                    valueField: 'serviziId',
                    listeners: {
                        select: 'onCodiciComboSelect'
                    }
                },
                {
                    xtype: 'combobox',
                    id: 'luogoAdmin',
                    fieldLabel: 'Luogo',
                    displayField: 'descrizione',
                    forceSelection: true,
                    store: 'storeLuoghi',
                    valueField: 'luoghiId'
                },
                {
                    xtype: 'textfield',
                    id: 'uorgAdmin',
                    fieldLabel: 'Uorg',
                    name: 'uorg'
                },
                {
                    xtype: 'datefield',
                    id: 'dataRichiestaAdmin',
                    fieldLabel: 'Data',
                    format: 'd/m/Y',
                    listeners: {
                        select: {
                            fn: 'onDataRichiestaSelect',
                            scope: 'controller'
                        }
                    }
                },
                {
                    xtype: 'datefield',
                    id: 'dataFineAdmin',
                    fieldLabel: 'Data fine',
                    format: 'd/m/Y'
                },
                {
                    xtype: 'timefield',
                    id: 'oraRichiestaAdmin',
                    fieldLabel: 'Ora',
                    format: 'H:i'
                },
                {
                    xtype: 'textfield',
                    disabled: true,
                    id: 'oreRichiestaAdmin',
                    fieldLabel: 'Ore'
                },
                {
                    xtype: 'textareafield',
                    id: 'noteRichiestaAdmin',
                    fieldLabel: 'Note'
                },
                {
                    xtype: 'button',
                    width: 279,
                    text: 'Richiedi Servizio',
                    listeners: {
                        click: {
                            fn: 'onRichiediServizio',
                            scope: 'controller'
                        }
                    }
                },
                {
                    xtype: 'button',
                    height: 23,
                    padding: '',
                    width: 279,
                    text: 'Annulla',
                    listeners: {
                        click: {
                            fn: 'onClear',
                            scope: 'controller'
                        }
                    }
                }
            ]
        }
    ],
    listeners: {
        afterrender: {
            fn: 'onFrmrichiestanuovoservizioAfterRender',
            scope: 'controller'
        }
    },
    tools: [
        {
            xtype: 'tool',
            type: 'help',
            listeners: {
                click: {
                    fn: 'onToolClick',
                    scope: 'controller'
                }
            }
        }
    ],

    onCodiciComboSelect: function(combo, record, eOpts) {
        Ext.getCmp('servizioComboAdmin').setValue(record);
    }

});